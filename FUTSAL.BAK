#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
#include<graphics.h>
#include<string.h>

struct det{
	char day[15];
	int time;
}book[10];

void menu();
void menu_start();
void booking();
void main()
{
	menu_start();
}


//Menu layout 1
void menu_start()
{
       int choice;
       int gd = DETECT,gm;
       initgraph(&gd,&gm,"c:\\TURBOC3\\BGI");
       menu();
       settextstyle(1,HORIZ_DIR,4);
       delay(500);
       gotoxy(30,13);
       printf("1) Book a Match.\n");
       gotoxy(30,15);
       printf("2) Cancel your Booking.\n");
       gotoxy(30,17);
       printf("3) View Bookings.\n");
       gotoxy(30,19);
       printf("4) Exit.");
       choice = getche();
       booking(choice);
       //getch();
       closegraph();
}
//Menu layout end

//UI Interface
void menu()
{
	rectangle(50,80,600,400);
	rectangle(52,82,598,398);
	delay(500);
	settextstyle(10,HORIZ_DIR,3);
	outtextxy(90,90,"Futsal Management System");
	delay(500);
	gotoxy(10,10);
	printf("=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=");
	gotoxy(40,24);
	printf("    Opeaning/Closing Time: 8am-7pm");
	gotoxy(10,23);
	printf("=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=");
}
//UI Interface end

void booking(choice)
{

	FILE *fp;
	char another;
	int i,ch;
	int gd = DETECT,gm;
	initgraph(&gd,&gm,"C:\\TURBOC3\\BGI");

	switch(choice)
	{
		case '1':
		{
			fp = fopen("c:\\TURBOC3\\BIN\\futsal\\dat.txt","a+");
			if(fp == NULL)
			{
				printf("File not FOUND");
			}
			another = 'y';
			while(another == 'y')
			{
				cleardevice();
				menu();
				fflush(stdin);
				gotoxy(15,12);
				printf("Enter the day of Match: ");
				scanf("%s",book[i].day);
				fflush(stdin);
				gotoxy(15,13);
				printf("Entre time of Match(8am-7pm): ");
				scanf("%d",&book[i].time);
				fflush(stdin);
				gotoxy(36,22);
			//	fwrite(&book,sizeof(book),1,fp);
				i=0;
				printf("%d",i);
				printf("DO you want to Book another Game (Y/N)");
				another = getche();
				tolower(another);
			}
			fclose(fp);
			menu_start();
		}
		break;
		case '2':
		{
			menu();
			gotoxy(10,20);
			printf("Nameste Puter");
		}
		break;
		case '3':
		{
			menu();
			gotoxy(10,15);
			printf("Meow meow NIGGA");
		}
		break;
		default:
		{
			exit (0);
		}
	}
	getch();
	closegraph();
}
